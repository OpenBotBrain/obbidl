protocol test(role c, role s) {
    fin {
        choice {
            add(a: u32) from c to s;
        } or {
            subtract(b: u32) from c to s;
        }
    }
    finish from c to s;
    total(total: u32) from s to c;
}
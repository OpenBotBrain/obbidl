protocol test(role c, role s) {
    fin {
        choice {
            add(u32) from c to s;
        } or {
            subtract(u32) from c to s;
        }
    }
    finish from c to s;
    total(u32) from s to c;
}